<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="CSS/global.css">
        <link rel="stylesheet" type="text/css" href="CSS/index.css">
    </head> 
    <body>
      <%# big meal start %>
      <div class="container-fluid">
        <div class="row">
          <div class="col-sm-12">
            <div class="image-container">
              <% var randomIndex = Math.floor(Math.random() * allRecipes.length); %>
              <% var randomIndex3 = Math.floor(Math.random() * allRecipes.length); %>

                <div class="container-image">
                    <img class="top-image" id="image1" src="<%= allRecipes[randomIndex].image %>">
                    <img class="bottom-image" id="image2" src="<%= allRecipes[randomIndex3].image %>">
                </div>
                
              <div class="centered-text" >
                <p id="mealMeal">For <%= allRecipes[randomIndex].meal %>:</p>
                <p id="textMeal"><%= allRecipes[randomIndex].name %></p>
              </div>

              <div class="top-left"><b>Recipe Rendezvous</b></div>
            </div>
          </div>
        </div>
      </div>
      <%# big meal end %>

      <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
      <%# Navbar start %>

      <nav class="navbar navbar-expand-sm navbar-light bg-light sticky-top">
        <div class="container-fluid">
          <%# Left side navbar %>
          <ul class="navbar-nav leftSide">
            <li class="nav-item names"><a class="nav-link" href="/"><b>Recipe Rendezvous</b></a></li>
            <li class="nav-item"><a class="nav-link" href="breakfast">Breakfast</a></li>
            <li class="nav-item"><a class="nav-link" href="lunch">Lunch</a></li>
            <li class="nav-item"><a class="nav-link" href="dinner">Dinner</a></li>
            <li class="nav-item"><a class="nav-link" href="dessert">Dessert</a></li>
            <li class="nav-item"><a class="nav-link" href="drinks">Drinks</a></li>
            <li class="nav-item"><a class="nav-link" href="bot">Bot</a></li>
          </ul>

          <%# Right side navbar %>
          <ul class="navbar-nav ms-auto">
            <span class="navbar-brand"><%=user%></span>
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false"><span class="fas fa-user"></button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                <li class="nav-item"><a class="nav-link" href="login">Log in</a></li>
                <li class="nav-item"><a class="nav-link" href="myRecipes">Profile</a></li>
                <li class="nav-item"><button onclick="logout()" type="button">Log out</span></button></li>
              </ul>
            </div>
          </ul>
        </div>
      </nav>
      <%# Navbar end %>

      <br><br>

      <%# newest recipes start %>
      <div class="container explore">
        <h1>Newest Recipes</h1>

        <div class="row">

          <div class="col">
            <a href="item/<%= allRecipes[allRecipes.length - 1]._id %>"><img src="<%= allRecipes[allRecipes.length - 1].image %>"><br>
            <p><%= allRecipes[allRecipes.length - 1].name %></p></a>
          </div>
          <div class="col">
            <a href="item/<%= allRecipes[allRecipes.length - 2]._id %>"><img src="<%= allRecipes[allRecipes.length - 2].image %>"><br>
            <p><%= allRecipes[allRecipes.length - 2].name %></p></a>
          </div>
          <div class="col">
            <a href="item/<%= allRecipes[allRecipes.length - 3]._id %>"><img src="<%= allRecipes[allRecipes.length - 3].image %>"><br>
            <p><%= allRecipes[allRecipes.length - 3].name %></p></a>
          </div>

        </div>
        <br>
        <div class="row">

          <div class="col">
            <a href="item/<%= allRecipes[allRecipes.length - 4]._id %>"><img src="<%= allRecipes[allRecipes.length - 4].image %>"><br>
            <p><%= allRecipes[allRecipes.length - 4].name %></p></a>
          </div>
          <div class="col">
            <a href="item/<%= allRecipes[allRecipes.length - 5]._id %>"><img src="<%= allRecipes[allRecipes.length - 5].image %>"><br>
            <p><%= allRecipes[allRecipes.length - 5].name %></p></a>
          </div>
          <div class="col">
            <a href="item/<%= allRecipes[allRecipes.length - 6]._id %>"><img src="<%= allRecipes[allRecipes.length - 6].image %>"><br>
            <p><%= allRecipes[allRecipes.length - 6].name %></p></a>
          </div>

        </div>
      </div>
      <%# newest recipes end %>

      <br><br>

      <%# bot introduction start %>
      <div class="container-fluid botIntro">
        <div class="row">
          <div id="botCol1" class="col">
            <div id="centerDiv">
              <h1><b>Can't decide on what you want?</b></h1>
              <h2><b>Try out our new bot!</b></h2>
              <p><b>Just tell it what your craving!</b></p>
              <button class="btn btn-secondary" onclick="window.location.href = '/bot';" type="button">Try now!</button>
            </div>
          </div>
          <% var randomRecipe = Math.floor(Math.random() * allRecipes.length); %>
          <div style="height: 500px; width: 100%; background-image: url('<%= allRecipes[randomRecipe].image %>');" id="botCol2" class="col">
            <div id="centerDiv">
                <% 
                const randomIndex2 = Math.floor(Math.random() * allRecipes.length);
                const randomRecipe2 = allRecipes[randomIndex2];
                %>
              <h1><b>If not, then how about a random recipe?</b></h1>
              <button class="btn btn-secondary" onclick="window.location.href = 'item/<%= randomRecipe2._id %>';" type="button">Try now!</button>
            </div>
          </div>
        </div>
      </div>
      <%# bot introduction end %>

      <br><br>

      <%# dessert/drinks start %>
      <div class="container explore">
        <h1>In the mood for something sweet?</h1>
        <div class="row">
          <% var randomDessert1 = Math.floor(Math.random() * dessert.length); %>
          <div class="col">
            <a href="item/<%= dessert[randomDessert1]._id %>"><img src="<%= dessert[randomDessert1].image %>"><br>
            <p><%= dessert[randomDessert1].name %></p></a>
          </div>
          <% var randomDessert2 = Math.floor(Math.random() * dessert.length); %>
          <div class="col">
            <a href="item/<%= dessert[randomDessert2]._id %>"><img src="<%= dessert[randomDessert2].image %>"><br>
            <p><%= dessert[randomDessert2].name %></p></a>
          </div>

        </div>
        <br><br>
        <h1>What about something refeshing?</h1>
        <div class="row">
          <% var randomDrink1 = Math.floor(Math.random() * drinks.length); %>
          <div class="col">
            <a href="item/<%= drinks[randomDrink1]._id %>"><img src="<%= drinks[randomDrink1].image %>"><br>
            <p><%= drinks[randomDrink1].name %></p></a>
          </div>
          <% var randomDrink2 = Math.floor(Math.random() * drinks.length); %>
          <div class="col">
            <a href="item/<%= drinks[randomDrink2]._id %>"><img src="<%= drinks[randomDrink2].image %>"><br>
            <p><%= drinks[randomDrink2].name %></p></a>
          </div>
        </div>
      </div>
      <%# dessert/drinks end %>

      <br><br>

      <%# end card start %>
      <div id="endCard">
        <div class="container">
          <br><br>
          <h1><b>Recipe Rendezvous</b></h1><br>
          <div class="row">
            <div class="col">
              <h2>Meals</h2>
              <a href="breakfast">Breakfast</a><br>
              <a href="lunch">Lunch</a><br>
              <a href="dinner">Dinner</a><br>
              <a href="dessert">Dessert</a><br>
              <a href="drinks">Drinks</a>
            </div>
            <div class="col">
              <h2>Other</h2>
              <a href="bot">Bot</a><br>
              <a href="login">Log in</a><br>
              <a href="register">Register</a><br>
            </div>
            <div class="col">
              <h2>Social Media</h2>
              <a href="https://github.com/Mzema4818/">About us</a><br>
              <a href="https://twitter.com/">Twitter</a><br>
              <a href="https://www.instagram.com/">Instagram</a><br>
              <a href="https://www.tiktok.com/en/">Tiktok</a><br>
            </div>
            <div class="col">
              <h2>Legal Information</h2>
              <a href="privatePolicy">Private Policy</a><br>
              <a href="termsOfService">Terms of Service</a>
            </div>
          </div>
        </div>
      </div>
      <%# end card end %>

    </body>
    <script>
      //get all recipes to javascript
      var recipes = []
      var mealType = []
      var mealName = []

      '<% allRecipes.forEach(function(recipe) { %>'
            recipes.push('<%= recipe.image %>')
            mealType.push('<%= recipe.meal %>')
            mealName.push('<%= recipe.name %>')
      '<% }); %>'
    </script>
  </html>
</html>

<script src="JavaScript/stuff.js"></script>
<script src="JavaScript/index.js"></script>